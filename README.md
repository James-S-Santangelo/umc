[![DOI](https://zenodo.org/badge/460906574.svg)](https://zenodo.org/badge/latestdoi/460906574)

## Project: Urban Micro Clines (UMC)
### Manuscript: The effects of environmental heterogeneity within a city on the evolution of clines
#### Authors: James S. Santangelo, Cindy Roux, and Marc T. J. Johnson

This project has been accepted at Journal of Ecology] <br>

### Abstract

1.	There is increasing evidence that environmental change associated with urbanization can drive rapid adaptation. However, most studies of urban adaptation have focused on coarse urban vs. rural comparisons or sampled along a single urban-rural environmental gradient, thereby ignoring the role that within-city environmental heterogeneity might play in adaptation to urban environments. 
2.	In this study, we examined fine-scale variation in the presence of HCN—a potent anti-herbivore defense—and its two underlying genes (Ac and Li) between park green spaces and surrounding suburban habitats for five city parks in the Greater Toronto Area. 
3.	We show that fine-scale urbanization has driven the formation of micro-clines in HCN on a scale of < 2 km, though the presence and strength of micro-clines varied across parks. Interestingly, these micro-clines were driven by lower HCN frequencies inside park green spaces, and are therefore in the opposite direction to that predicted based on previously described patterns of HCN frequency change along urban-rural gradients. 
4.	Synthesis: These results suggest larger scale, adaptive urban-rural clines occur across a complex matrix of environmental heterogeneity within cities that drives fine-scale adaptive microclines of varying strengths and directions.

### Using the code in this repository

To use the code in this repository to reproduce the manuscript's results, please
follow the following steps:

1. `git clone` this repository or download it as a zip folder
2. Open `Rstudio`, go to `file > Open project` and open the
`umc.Rproj` Rproject associated with this repository
3. Once open, type `renv::restore()` in the **R console** to download the
packages required to perform the analyses. If renv doesn't work, manually download the packages listed at the top of
[scripts/main.R](scripts/main.R) and use your current version of R.
4. Manuscript results can be reproducibly generated by running [scripts/main.R](scripts/main.R), 
which will create the cleaned/processed dataframes, tables, figures, and key results.
